---
layout: post
title:  "socket网络编程3"
data: 星期二, 07. 四月 2020 11:33上午 
categories: linux
tags: 专题
---
* 该模块会针对linux中的某一块知识做专题整理，也许会有些不足或者错误的地方，未来可能会作修改。

#linux专题5----多进程和多线程服务器

* 只是记一些有关网络编程的零碎知识

## 多进程并发服务器

之前TCP的连接中 ACCEPT函数、READ函数、WRITE函数都是阻塞，在READ的时候我们不可能建立一个新的连接，而当有多个连接的时候，问题就出来了。

子进程会继承父进程的所有套接字，但是父进程只负责监听套接字，负责监听和提取连接，和客户端通信的事交给子进程。 对于所有子进程都关闭监听套接字。

> #### shutdown函数
>
了解了多进程并发服务器我们知道了一个套接字会被会多个进程共享，起始close（fd）函数并不会直接关闭套接字，而是将fd的计数减一，当计数为0才会关闭。想要不管这个计数强行关闭就要用到shutdown了。shutdown关闭的选择有很多，可以只关闭读，只关闭写，也可以都关闭。


## 多线程并发服务器

