---
layout: post
title:  "B树和B+树"
data: 星期六, 14. 三月 2020 02:35下午 
categories: 数据结构
tags: 专题
---
* 该模块会针对数据结构中的某一块知识做专题整理，也许会有些不足或者错误的地方，未来可能会作修改。

#  数据结构专题4----B树和B+树

## B树
![](https://github.com/LLLibra/LLLibra.github.io/raw/master/_posts/imgs/20200314-151757.png)
#### B树的特点
m为树的阶数，二叉树的阶数是一个节点的子节点数目的最大值。

1.根节点至少有两个子节点

2.每个中间节点都包含k-1个元素和k个孩子，其中 m/2 ≤ k ≤ m 

3.每个叶子节点都包含k-1个元素，其中 m/2 ≤ k ≤ m

4.每个节点中的元素从小到大排列，节点当中k-1个元素正好是k个孩子包含的元素的值域划分（一个结点有k个孩子时，必有k-1个元素才能将子树中所有元素划分为k个子集）

#### B树的插入（节点数满了就分裂然后看父亲节点）
![](https://github.com/LLLibra/LLLibra.github.io/raw/master/_posts/imgs/20200314-152043.png)

#### B树的删除
如果左右兄弟够则一个，不够则合并再处理父节点。


## B+树
B+树是B树的改良版

![](https://github.com/LLLibra/LLLibra.github.io/raw/master/_posts/imgs/20200314-144729.png)



#### 与B树的区别

1.有K个子节点的节点必然有K个关键码，B树是K-1个

2.非叶节点仅具有索引作用，元素信息均存放在叶节点中

3.树的所有叶节点构成一个有序链表，可以按照关键码排序的次序遍历全部记录

#### B+树的插入（节点数满了就分裂然后看父亲节点）

![](https://github.com/LLLibra/LLLibra.github.io/raw/master/_posts/imgs/20200314-152304.png)


#### B+树的优势
1.由于B+树在内部节点上不包含数据信息，因此在内存页中能够存放更多的key。 数据存放的更加紧密，具有更好的空间局部性。因此访问叶子节点上关联的数据也具有更好的缓存命中率。

2.B+树的叶子节点都是相连的，因此对整棵树的遍历只需要一次线性遍历叶子节点即可。而且由于数据顺序排列并且相连，所以便于区间查找和搜索。而B树则需要进行每一层的递归遍历。相邻的元素可能在内存中不相邻，所以缓存命中性没有B+树好。


## 操作系统中为什么用B树和B+树

当大量数据存储在磁盘上，进行查询操作时，需要先将数据加载到内存中（磁盘IO操作），**而数据并不能一次性全部加载到内存中，只能逐一加载每个磁盘页（对应树的一个节点）**，并且磁盘IO操作很慢，平衡二叉树由于树深度过大而造成磁盘IO读写过于频繁，进而导致效率低下。为了减少磁盘IO的次数，就需要降低树的深度，那么就引出了B树和B+树：每个节点存储多个元素，采用多叉树结构。


