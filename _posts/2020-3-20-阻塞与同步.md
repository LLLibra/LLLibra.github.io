---
layout: post
title:  "阻塞和非阻塞、同步和异步"
data: 星期五, 20. 三月 2020 09:46上午 
categories: 操作系统
tags: 专题
---
* 该模块会针对操作系统中的某一块知识做专题整理，也许会有些不足或者错误的地方，未来可能会作修改。

#  操作系统专题8----阻塞和非阻塞、同步和异步

## 阻塞与非阻塞
阻塞和非阻塞通常用来形容多线程间的相互影响。一个线程占用了临
界区资源，那么其他所有需要这个资源的线程就必须在这个临界区中进行等待
等待会导致线程挂起，这种情况就是阻塞。此时，如果占用资源的线程一直不
愿意释放资源，那么其他所有阻塞在这个临界区上的线程都不能工作。

非阻塞的意思与之相反，它强调没有一个线程可以妨碍其他线程执行，所
有的线程都会尝试不断前向执行。


## 同步与异步
 同步和异步通常用来形容一次方法调用。同步方法调用了就得等它返回，异步方法调用则可以继续其他的操作而不需要等待，之后会返回給调用者信息。



## I/O操作

**IO分两阶段（一旦拿到数据后就变成了数据操作，不再是IO）：**
 
 1.数据准备阶段

 2.内核空间复制数据到用户进程缓冲区（用户空间）阶段

同步IO和异步IO的区别在于第一步发起IO请求是否会被阻塞

阻塞IO和非阻塞IO的区别就在于第二个步骤是否阻塞，阻塞即为同步，不阻塞即为异步。

![](https://github.com/LLLibra/LLLibra.github.io/raw/master/_posts/imgs/20200320-100551.png)


![](https://github.com/LLLibra/LLLibra.github.io/raw/master/_posts/imgs/20200312-142610.png)
#### 同步IO有哪些

1)阻塞I/O（blocking I/O）

2)非阻塞I/O （nonblocking I/O）

3) I/O复用(select 和poll) （I/O multiplexing）

4)信号驱动I/O （signal driven I/O (SIGIO)）

#### 异步IO有哪些

异步IO就是非常适合IO密集型的场景，比如网络爬虫和Web服务。

>
异步IO的通常都是非阻塞IO的，但是非阻塞IO并不一定就是异步IO，所以不存在 "异步阻塞" 的说法。另外，阻塞IO肯定也是同步IO，反之，则不一定。
>
比如 Email 的场景就是异步的，当你发送邮件后，成功与否你无法马上得到响应(比如出现 to address 不存在时)，但它此时并没有阻塞(异步非阻塞)，所以异步的本质是，当消息发送到对方没有立即得到期待的回应。 反而 HTTP 就是就是同步的，发送请求，并等待对方(server)马上得到回应，当然此时该 thread 处于阻塞的状态(同步阻塞)。

## 线程同步
#### 什么是线程同步
所谓同步，就是在发出一个功能调用时，在没有得到结果之前，该调用就不返回，同时其它线程也不能调用这个方法。

在多线程编程里面，一些敏感数据不允许被多个线程同时访问，此时就使用同步访问技术，保证数据在任何时刻，最多有一个线程访问。

#### 线程同步的实现方式

**1.临界区(Critical Section)**

只允许一个线程进入临界区，其他试图访问的线程会被挂起。其范围为单个进程内。

操作：进入临界区，离开临界区

**2.互斥量(Mutex)**

只允许拥有互斥对象的线程访问公共资源，而互斥对象只有一个。可以在不同进程间使用。临界区的范围加强版。

操作：加锁，解锁

**3.信号量(Semaphore)**

允许多个进程访问公共资源。互斥量的数量加强版。

**4.使用管程**






